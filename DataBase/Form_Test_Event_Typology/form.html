<!DOCTYPE HTML>
<html>
<link href="form.css" rel="stylesheet" type="text/css">
<head>
  <title>New Event Typology Form</title>
  <script>

    // Di queste funzioni verra' fatta una libreria
    function printPriority(){
      var priority = document.getElementById("priority").value;
      var literalPriority = "";
      switch (priority) {
        case "1": literalPriority = "Low";
          break;
        case "2": literalPriority = "Low-Mid";
          break;
        case "3": literalPriority = "Mid";
          break;
        case "4": literalPriority = "Mid-high";
          break;
        case "5": literalPriority = "High";
          break;
        default: literalPriority = "Not Set";
          break;
      }
      document.getElementById("print-priority").innerHTML = literalPriority;
    }
    
    // Temporanea non necessaria
    function printRepeatInfo() {
      var string_repeat = document.getElementById("repeat-select").value;
      var int_repeat = document.getElementById("repeat-value").value;

      if(string_repeat != "no-repeat"){ // In questa sezione vengono effettuate azioni sulla pagina in caso di repeat

        // Ho dovuto fare in questo modo in quanto JS e' stupido e non sa togliere gli ultimi due caratteri
        string_repeat = string_repeat.split("").reverse().join("").substring(2).split("").reverse().join("");
      
        // Tappabuchi temporanei

        if(string_repeat == "dai"){
          string_repeat = "day";
        }
        if(int_repeat > 1){
          string_repeat += "s";
        }
        if(string_repeat.length > 1){
          document.getElementById("repat-info").innerHTML = "The event will be repeated every " + int_repeat + " " + string_repeat;
        }
      }else{
        document.getElementById("repat-info").innerHTML = "";
      }
    }
  </script>
</head>
<body>

<div class="event-typology-form">

 <form action="insert.php" method="POST">

  <table>
   <tr>
    <td>New typology name :</td>
    <td><input type="text" name="name" required placeholder="Enter a name for event typology"></td>
   </tr>

   <tr>
    <td>Priority :</td>
    <td><input type="range" min="1" max="5" id="priority" name="priority" required onmouseup="printPriority()">
      <span id="print-priority">Select a priority</span>
    </td>
   </tr>

   <tr>
    <td>Early Notification (hours) :</td>
    <td><input type="number" name="early_notification" value="1" min="0" max="168" required></td>
   </tr>

   <tr>
    <td>Event Repeat :</td>
    <td><input type="number" name="repeat_value" id="repeat-value" min="1" max="99" value="1" onmouseup="printRepeatInfo()"></td>

    <td><label for="repeat-select">
      <select id="repeat-select" name="repeat_interval">
        <option value=""  onmouseup="printRepeatInfo()">--Selet a repeat interval--</option>
        <option value="no-repeat" onmouseup="printRepeatInfo()">Don't repeat</option>
        <option value="daily" onmouseup="printRepeatInfo()">Daily</option>
        <option value="weekly" onmouseup="printRepeatInfo()">Weekly</option>
        <option value="monthly" onmouseup="printRepeatInfo()">Monthly</option>
        <option value="yearly" onmouseup="printRepeatInfo()">Yearly</option>
      </select>
    </label></td>
   </tr> 

   <tr>
     <td id="repat-info"></td>
   </tr>

   <tr>
     <td><input type="submit" value="Create Typology"></td>
    </tr>
  </table>
 </form>
 </div>
</body>
</html>
